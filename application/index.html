<html>
<head>
	<title>Mendeley Readership Locations</title>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<link rel="stylesheet" type="text/css" href="index.min.css">
</head>
<body id="sample">
	<h1>Readership Locations</h1>
	<div id="usage">
		<div>Document: 
			<select id="user_doc_popup"></select>
		</div>
		<object id="map" data="world_low.svg" width="1024" height="660" type="image/svg+xml"></object>
		<p id="dev_reset">
			<a href="http://localhost:8111/application/">Reset</a>
		</p>
		<p class="credit">World Map by 
			<a href="http://www.amcharts.com">AmCharts</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY 4.0</a>
		</p>
	</div>
	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="/dist/standalone.js"></script>
	<script type="text/javascript" src="./main.min.js"></script>
	<script type="text/javascript">
		$(function () {
			var config;
            // Set authentication method based on config
            if (typeof window.oauthImplicitGrantConfig === 'object') {
            	MendeleySDK.API.setAuthFlow(MendeleySDK.Auth.implicitGrantFlow(window.oauthImplicitGrantConfig));
            }
            else {
                // Auth code flow can be configured with a couple fo extra URLs...
                MendeleySDK.API.setAuthFlow(MendeleySDK.Auth.authCodeFlow({
                    // The API authentication goes through server, so this URL clears cookies and forces a redirect
                    apiAuthenticateUrl: '/logout',
                    // You can optionally provide a URL on *your* server where the token can be refreshed
                    refreshAccessTokenUrl: '/oauth/refresh'
                }));
            }
            $(document).ready(getDocuments);
            $("#user_doc_popup").on("change", getCatalog);
        });
	</script>	
</body>	
</html>