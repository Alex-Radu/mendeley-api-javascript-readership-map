"use strict";var populateDropdown=function(e){var t,r,o,n,i,a=document.getElementById("user_doc_popup");for(t=0,r=e.length,o;r>t;t+=1)if(o=e[t],o.identifiers&&(o.identifiers.arxiv&&(n="arxiv",i=o.identifiers.arxiv),o.identifiers.doi&&(n="doi",i=o.identifiers.doi)),n){var s=document.createElement("option");s.textContent=o.title,s.setAttribute("data-identifier-type",n),s.value=i,a.appendChild(s)}$("#user_doc_popup").trigger("change")},updateMap=function(e){var t={};$.each(e,function(e,r){if(r.reader_count_by_country)for(var o in r.reader_count_by_country)t[o]?t[o]+=r.reader_count_by_country[o]:t[o]=r.reader_count_by_country[o]});for(var r=map.contentDocument.getElementsByClassName("land"),o=0;o<r.length;o++){var n=r[o].getAttribute("title");r[o].style.fill=t[n]?"rgb(157, 22, 32)":"rgb(204,204,204)"}},errorHandler=function(e,t){var r;console.error("Request failed with status code:",t.status),t&&t.responseText?(r=JSON.parse(t.responseText),r.hasOwnProperty("message")?console.error("Response error message:",r.message):console.info("No response error message received")):console.info("No response body received")},getDocuments=function(){MendeleySDK.API.documents.list().done(populateDropdown).fail(errorHandler)},getCatalog=function(e){var t=this.selectedOptions.item(0).dataset.identifierType,r=this.value,o={};o[t]=r,o.view="stats",MendeleySDK.API.catalog.search(o).done(updateMap).fail(errorHandler),e.preventDefault()};